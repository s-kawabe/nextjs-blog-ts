---
title: 'Next.jsのまとめ'
date: '2021-01-30'
---

# Next.jsチュートリアルの復習
## クライアントサイドのページ遷移(ナビゲーション)
Linkコンポーネントによって、同じNext.jsアプリ内にある２つのページ間の<br>
クライアントサイドでのナビゲーションが可能になる。<br>

クライアントサイドのナビゲーションはページ遷移がJavaScriptを用いて行われるため<br>
ブラウザによって行われるデフォルトのページ遷移よりも高速になる。<br>

## コード分割とプリフェッチング
Next.js は自動的にコード分割を行うので、各ページはそのページに必要なものだけを読み込みます。<br>
つまり、トップのページがレンダリングされたときに、<br>
他のページのコードが最初からサーブされるわけではないということです。<br>

Linkコンポーネントがブラウザのビューポートに表示されると<br>
Next.jsは自動的にリンク先のページのコードをバックグラウンドで**プリフェッチ**する。<br>
リンクをクリックするときまでには、目的のページのコードはバックグラウンドで読み込み済みになる！<br>

> Next.jsのアプリ外のサイトへ遷移する場合はLinkでなくaタグで対応する。

## アセット
Next.jsは画像などの静的なファイルを、トップレベルのpublicディレクトリ配下で<br>
サーブすることができます。pagesディレクトリと同様に、puclicないのファイルは<br>
アプリケーションのルートから参照することができる。<br>

## メタデータ
```tsx
<Head>
  <title>Create Next App</title>
  <link rel="icon" href="/favicon.ico" />
</Head>
```
`Head`タグはNextに組み込まれているReactコンポーネント。<br>
htmlにおける<head>タグ内の情報を変更する場合はこのHeadコンポーネントを利用する<br>

> lang属性を加えるにはカスタムのDocumentコンポーネントを使用する。

## CSSModules
- `pages/_app.js`でインポートしたCSSはコンポーネント全体に効かせることができる
- CSSモジュールを使う為には`*.module.css`という名前のCSSファイルをインポートすればよい

## プリレンダリングとデータフェッチング
### プリレンダリングとは
Next.jsはクライアント側のJavaScriptで全てのレンダリングを行うのではなく<br>
あらかじめ各ページのHTMLを生成しておく動きをする。<br>
これによってパフォーマンスとSEOが向上する。<br><br>

これによって、Next.jsで作られたサイトはJavaScriptをオフにして閲覧しても<br>
JavaScriptでHTMLを作ることがない為、正常に閲覧できる。<br>
これはCRAによるアプリでは不可能。<br><br>

**ハイドレーション**<br>
生成された各HTMLはそのページに必要な最小限のJavaScriptコードを関連付けられる。<br>
ブラウザによってページが読み込まれると、そのページのJavaScriptコードが実行されてページが<br>
完全にインタラクティブなものになる。
